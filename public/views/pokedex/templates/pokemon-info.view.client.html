<div class="container"
     ng-controller="PokemonInfoController as model">
    <ng-include src="'../views/includes/header.view.client.html'"></ng-include>

    <div class="pokeName">
        <h1 class="text-capitalize text-center">{{model.pokemon.name}} # {{model.pokemon.id}}</h1>
    </div>
    <hr>
    <div class="upper">
        <div class="col-md-4 pokemon-info-image">
            <img ng-src="{{model.pokemon.img}}"
                 class="img-responsive"/>
            <div class="social" style="text-align:center">
                <span>
                    <a ng-click="model.likePokemon()"
                       title="Like Pokemon"
                       ng-disabled="model.isLoggedInUser()==false"
                       class="likeButton like">
                        <i class="glyphicon"
                           ng-class="(model.like.userVotes==1) ? 'glyphicon-heart': 'glyphicon-heart-empty'"
                           aria-hidden="true"
                          ></i>
                        <span class="tooltiptext">Like Pokemon
                        <span ng-show="model.isLoggedInUser()==false"> | Login Required</span></span>
                    </a>
                     <span ng-model="like.votes"
                           ng-if="model.like.votes > 0"
                           class="pokemon-info-likes"
                     ><h5 style="display: inline">{{model.like.votes}} users like this Pokemon</h5></span>
                </span>
            </div>
        </div>
        <div class="col-md-8">
            <h4 class="description">
               {{model.pokemon.species.description}}
            </h4>
            <div class="physicalAttribtues">
                <h3>Physical Attributes</h3>
                <ul>
                    <li>Height : {{model.pokemon.height}}'</li>
                    <li>Weight : {{model.pokemon.weight}}</li>
                    <li>Base Experience : {{model.pokemon.base_experience}}</li>
                    <li>Genus : {{model.pokemon.species.genus}}</li>
                    <li>Habitat : {{model.pokemon.species.habitat}}</li>
                    <li>Shape : {{model.pokemon.species.shape}}</li>
                    <li>Abilities :
                        <ul ng-repeat="ability in model.pokemon.abilities">
                            <li class="like">
                                <a title="{{ability.description}}">{{ability.name}}</a>
                                <span class="tooltipabilities">{{ability.description}}</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="type tagcloud">
                <h3>Types</h3>
                <ul class="list-group">
                    <li class="list-group-item"
                        ng-repeat="type in model.pokemon.types">
                        <a href="#" class="{{model.getColorClass(type)}}">{{type}}</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="weakness col-md-12">
       <h3>Weaknesses</h3>
        <div class="tagcloud">
            <ul>
                <li ng-repeat="weakness in model.pokemon.weaknesses track by $index">
                    <a href="#" class="{{model.getColorClass(weakness)}}">
                        {{weakness}}
                    </a>
                </li>
            </ul>

        </div>
    </div>
    <div class="stats col-md-12">
        <h3>Stats</h3>
        <div class="progressContainer" ng-repeat="stat in model.pokemon.stats">
            <h6 class="col-md-3" style="text-transform: capitalize;margin:0;">{{stat.name}}  ({{stat.base_stat}})</h6>
            <div class="progress">
                <div class="progress-bar progress-bar-info col-md-9" role="progressbar"
                     aria-valuemin="0" aria-valuemax="{{stat.base_stat}}"
                     style="width:{{model.getIndicator(stat.base_stat)}}%"
                     aria-valuenow="{{stat.base_stat}}">
                </div>
            </div>
        </div>
    </div>
    <div class="moves col-md-12">
        <h3>Moves</h3>
        <div class="tagcloud">
            <ul>
                <li ng-repeat="move in model.pokemon.moves">
                    <a href="#" class="moves">{{move}}</a>
                </li>
            </ul>

        </div>

    </div>

    <div class="evolution col-md-12">
        <h3>Evolution</h3>
        <div class="evolution-pane">
            <figure ng-repeat="evo in model.pokemon.species.evoChain" class="col-md-3 pokemon-thumb"
                    ng-click="model.getMoreInfo(evo.species_name)">
                    <img ng-src="{{evo.img}}"
                         class="img-responsive pokemon-thumb-img"
                         style="padding:16px"/>
                <figcaption>
                    <div class="text-center pokemon-thumb-name">{{evo.species_name}}#{{evo.species_id}}</div>
                </figcaption>
                    <!--<h5 title="{{evo.species_id}}" class="text-center ">{{evo.species_name}}</h5>-->
            </figure>
        </div>
    </div>

    <div class="reviews col-md-12">
        <div class="comments-header" style="display: inline">
            <h3>Comments / Reviews</h3>
            <span>
                <button type="button"
                        class="btn btn-primary btn-md like"
                        data-toggle="modal"
                        data-target="#myCommentModal"
                        ng-disabled="model.isLoggedInUser()==false">
                    Add Review
                    <span class="tooltiptextComment" ng-show="model.isLoggedInUser()==false">Login Required</span>
                </button>
            </span>
        </div>
        <div class="comments-pane">
            <hr>
            <div class="comments" ng-repeat="review in model.reviews">
                <h3>{{review.title}}</h3>
                <p>{{review.comment}}</p>
                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myCommentModal"
                        ng-click="model.editComment(review)">
                    Edit Comment
                </button>
                <button type="button" class="btn btn-primary btn-sm" ng-click="model.deleteComment(review)">
                    Delete Comment
                </button>
            </div>
        </div>
    </div>

    <ng-include src="'../views/includes/footer.view.client.html'"></ng-include>
</div>



<!-- Modal -->
<div class="modal fade" id="myCommentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Comment</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form>
                        <div class="form-group">
                            <label for="title">Title</label>
                            <input ng-model="review.title" type="text"
                                   class="form-control" id="title" name="title"
                                   placeholder="Enter Title"
                                   value="{{model.activeReview.title}}"/>
                        </div>
                        <div class="form-group">
                            <label for="review">Review</label>
                            <textarea ng-model="review.comment"
                                      class="form-control" id="review" name="review"
                                      placeholder="Enter Comment">{{model.activeReview.comment}}</textarea>
                        </div>

                        <div class="alert alert-danger" ng-show="model.error">
                            {{model.error}}
                        </div>

                        <div class="alert alert-success" ng-show="model.message">
                            {{model.message}}
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
                <div class="form-group">
                    <a class="btn btn-block btn-default" data-dismiss="modal">
                        Close
                    </a>
                </div>
                <div class="form-group">
                    <a class="btn btn-block btn-primary" ng-click="model.addReview(model.review)">
                        Submit Comment
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


